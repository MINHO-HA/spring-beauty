CREATE TABLE AGE(
	AGE_ID int primary key
);
insert into AGE values(1);
insert into AGE values(2);
insert into AGE values(3);
insert into AGE values(4);
insert into AGE values(5);

CREATE TABLE SKINTYPE(
	SKINTYPE_ID int primary key
);
insert into SKINTYPE values(1); -- �Ǽ�
insert into SKINTYPE values(2); -- ����
insert into SKINTYPE values(3); -- ���ռ�
insert into SKINTYPE values(4); -- �ΰ���

CREATE TABLE GENDER(
	GENDER_ID int primary key
);
insert into GENDER values(0);
insert into GENDER values(1); -- ����
insert into GENDER values(2); -- ����

CREATE TABLE MEMBER(
	MEM_ID varchar(100) primary key,
    MEM_PW varchar(200) not null,
    MEM_NAME varchar(50) not null,
    MEM_AGE int,
    MEM_EMAIL varchar(200) not null,
    MEM_PROFILE varchar(200),
    GENDER_ID int,
    SKINTYPE_ID int,
    AGE_ID int,
    constraint FK_MEMBER_SKINTYPE_ID foreign key(SKINTYPE_ID) references SKINTYPE(SKINTYPE_ID) on delete cascade,
    constraint FK_MEMBER_GENDER_ID foreign key(GENDER_ID) references GENDER(GENDER_ID) on delete cascade,
    constraint FK_MEMBER_AGE_ID foreign key(AGE_ID) references AGE(AGE_ID) on delete cascade
);
INSERT INTO MEMBER VALUES('asd','asd','jhon',23,'asd@naver.com','1','1','2');
INSERT INTO MEMBER VALUES('qwe','qwe','jhon',23,'asd@naver.com','1','1','2');
INSERT INTO MEMBER VALUES('zxc','zxc','jhon',23,'asd@naver.com','1','1','2');

CREATE TABLE TIP(
TIP_ID INT AUTO_INCREMENT PRIMARY KEY,
TIP_TITLE VARCHAR(200) NOT NULL,
TIP_THUMBNAIL VARCHAR(200) NOT NULL,
TIP_URL VARCHAR(500) NOT NULL,
AGE_ID INT,
SKINTYPE_ID INT,
GENDER_ID INT,
CONSTRAINT FK_TIP_AGE_ID FOREIGN KEY(AGE_ID) REFERENCES AGE(AGE_ID) on delete cascade,
CONSTRAINT FK_TIP_SKINTYPE_ID FOREIGN KEY(SKINTYPE_ID) REFERENCES SKINTYPE(SKINTYPE_ID) on delete cascade,
CONSTRAINT FK_TIP_GENDER_ID FOREIGN KEY(GENDER_ID) REFERENCES GENDER(GENDER_ID) on delete cascade
);
insert into TIP (TIP_TITLE, TIP_THUMBNAIL, TIP_URL, AGE_ID, SKINTYPE_ID, GENDER_ID)
values('title', 'https://d33ur1yh5ph6b5.cloudfront.net/2f3e0b99-d237-4471-9cf3-7f2a4805f0e5-small','http://www.naver.com',3,1,1);
insert into TIP (TIP_TITLE, TIP_THUMBNAIL, TIP_URL, AGE_ID, SKINTYPE_ID, GENDER_ID)
values('title', 'https://d33ur1yh5ph6b5.cloudfront.net/fb47b7d4-c46f-4f86-a2a9-c5f12ca08454-mid','http://www.youtube.com',3,1,1);

CREATE TABLE FOLLOW(
    FOLLOW_ID INT AUTO_INCREMENT PRIMARY KEY,
    MEM_ID VARCHAR(100),
    TARGET_MEM_ID VARCHAR(100),
    CONSTRAINT FK_FOLLOW_MEM_ID FOREIGN KEY(MEM_ID) REFERENCES MEMBER(MEM_ID) on delete cascade,
    CONSTRAINT FK_FOLLOW_TARGET_MEM_ID FOREIGN KEY(TARGET_MEM_ID) REFERENCES MEMBER(MEM_ID) on delete cascade
);
insert into follow values(1,'asd','qwe');
insert into follow values(2,'qwe','asd');
insert into follow values(3,'asd','zxc');

CREATE TABLE ITEM(
    ITEM_ID INT auto_increment primary KEY,
    ITEM_NAME VARCHAR(100) NOT NULL,
    ITEM_BRAND VARCHAR(100) NOT NULL,
    ITEM_CATEGORY VARCHAR(100) NOT NULL,
    AGE_ID INT,
    SKINTYPE_ID INT,
    GENDER_ID INT,
    ITEM_PRICE INT NOT NULL,
	ITEM_CAPA VARCHAR(100),
    ITEM_IMAGE VARCHAR(400) NOT NULL,
    CONSTRAINT FK_ITEM_AGE_ID FOREIGN KEY(AGE_ID) REFERENCES AGE(AGE_ID)  on delete cascade,
    CONSTRAINT FK_ITEM_SKINTYPE_ID FOREIGN KEY(SKINTYPE_ID) REFERENCES SKINTYPE(SKINTYPE_ID) on delete cascade,
    CONSTRAINT FK_ITEM_GENDER_ID FOREIGN KEY(GENDER_ID) REFERENCES GENDER(GENDER_ID) on delete cascade
);
drop table item;
insert into ITEM values(1,'���','�Ƹ�','Ŭ��¡',2,2,1,10000,'200ml','http://d9vmi5fxk1gsw.cloudfront.net/home/glowmee/upload/20180814/1534239707375.png');
insert into ITEM values(2,'��������','����Ʈ','����ī��',2,2,1,18000,'8.6g','http://d9vmi5fxk1gsw.cloudfront.net/home/glowmee/upload/20180814/1534239707375.png');
select * from ITEM;

CREATE TABLE REVIEW(
    REVIEW_ID INT auto_increment primary KEY,
    MEM_ID VARCHAR(100) NOT NULL,
    REVIEW_TITLE VARCHAR(200) NOT NULL,
    REVIEW_CONTENT VARCHAR(4000) NOT NULL,
    ITEM_ID INT,
    REVIEW_LIKE INT,
    REVIEW_GRADE float,
    CONSTRAINT FK_REVIEW_MEM_ID FOREIGN KEY(MEM_ID) REFERENCES MEMBER(MEM_ID)  on delete cascade,
    CONSTRAINT FK_REVIEW_ITEM_ID FOREIGN KEY(ITEM_ID) REFERENCES ITEM(ITEM_ID) on delete cascade
);
insert into REVIEW values (1,'asd','�̰� ��¥ ���ƿ�','�׳� ����',1,12,3.4);
insert into REVIEW values (2,'zxc','�̰� ��¥ �Ⱦ��','�׳� ����',1,1,1.4);
insert into REVIEW(MEM_ID, REVIEW_TITLE, REVIEW_CONTENT, ITEM_ID, REVIEW_LIKE, REVIEW_GRADE) values ('zxc','�̰� ��¥ �Ⱦ��','�׳� ����',1,1,1.4);
select *  from REVIEW;
drop table REVIEW;

CREATE TABLE STORE(
    STO_ID INT AUTO_INCREMENT PRIMARY KEY,
    ITEM_ID INT,
    MEM_ID VARCHAR(100),
    CONSTRAINT FK_STORE_ITEM_ID FOREIGN KEY(ITEM_ID) REFERENCES ITEM(ITEM_ID) on delete cascade,
    CONSTRAINT FK_STORE_MEM_ID FOREIGN KEY(MEM_ID) REFERENCES MEMBER(MEM_ID) on delete cascade
);
select * from STORE;

CREATE TABLE BASKET(
	BASKET_ID INT AUTO_INCREMENT PRIMARY KEY,
	MEM_ID VARCHAR(100),
	ITEM_ID INT,
	BASKET_AMOUNT INT NOT NULL,
	BASKET_CHECK INT NOT NULL,
	CONSTRAINT FK_BASKET_MEM_ID FOREIGN KEY(MEM_ID) REFERENCES MEMBER(MEM_ID) on delete cascade,
	CONSTRAINT FK_BASKET_ITEM_ID FOREIGN KEY(ITEM_ID) REFERENCES ITEM(ITEM_ID) on delete cascade
	);
	
CREATE TABLE PAYMENT(
	PAY_ID INT AUTO_INCREMENT PRIMARY KEY,
	PAY_NUM INT,
	ITEM_ID INT,
	MEM_ID VARCHAR(100),
	PAY_NAME VARCHAR(50) NOT NULL,
	PAY_PHONE VARCHAR(50) NOT NULL,
	PAY_ADDR VARCHAR(200) NOT NULL,
	PAY_MESSAGE VARCHAR(50),
	PAY_PRICE INT NOT NULL,
	PAY_DATE DATE NOT NULL,
	PAY_METHOD VARCHAR(50) NOT NULL,
	PAY_AMOUNT INT NOT NULL,
	CONSTRAINT FK_PAY_MEM_ID FOREIGN KEY(MEM_ID) REFERENCES MEMBER(MEM_ID) on delete cascade,
	CONSTRAINT FK_PAY_ITEM_ID FOREIGN KEY(ITEM_ID) REFERENCES ITEM(ITEM_ID) on delete cascade
	);
	
ALTER TABLE MEMBER ADD MEM_ADDR VARCHAR(200);
ALTER TABLE MEMBER ADD MEM_PHONE VARCHAR(50);
ALTER TABLE MEMBER ADD MEM_POINT INT default '0';
	
/*
drop table MEMBER;
drop table TIP;
drop table AGE;
drop table FOLLOW;
drop table SKINTYPE;
drop table GENDER;


*/
select * from MEMBER;
select * FROM MEMBER WHERE MEM_ID = (SELECT MEM_ID FROM FOLLOW WHERE TARGET_MEM_ID = 'asd');
alter table member add column  MEM_PROFILE varchar(200);
commit;

CREATE TABLE LIKED(
    LIKE_ID INT AUTO_INCREMENT PRIMARY KEY,
    REVIEW_ID INT,
    MEM_ID VARCHAR(100),
    TARGET_MEM_ID VARCHAR(100),
    CONSTRAINT FK_LIKED_REVIEW_ID FOREIGN KEY(REVIEW_ID) REFERENCES REVIEW(REVIEW_ID),
    CONSTRAINT FK_LIKED_MEM_ID FOREIGN KEY(MEM_ID) REFERENCES MEMBER(MEM_ID),
    CONSTRAINT FK_LIKED_TARGET_MEM_ID FOREIGN KEY(TARGET_MEM_ID) REFERENCES MEMBER(MEM_ID)
);


